<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login Admin | Conexão Street</title>
  <style>
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial; background:#07070A; color:#f3f3f7}
    .wrap{max-width:420px; margin:0 auto; padding:22px}
    .card{border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.03); border-radius:18px; padding:16px}
    .inp{width:100%; padding:12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.04); color:#fff; outline:none}
    .btn{width:100%; margin-top:10px; padding:12px; border-radius:14px; border:1px solid rgba(122,43,255,.55);
      background:linear-gradient(135deg, rgba(122,43,255,.95), rgba(155,107,255,.55)); color:#fff; font-weight:900; cursor:pointer}
    .hint{color:rgba(255,255,255,.65); font-size:12px; line-height:1.45}
    .ok{color:#24d18d} .bad{color:#ff3b5c}
  </style>
</head>
<body>
  <div class="wrap">
    <h2 style="margin:0 0 10px">Login Admin</h2>
    <div class="hint" style="margin:0 0 14px">Esse login é só pra você entrar como admin no navegador.</div>

    <div class="card">
      <input class="inp" id="email" placeholder="Seu e-mail" autocomplete="email" />
      <div style="height:10px"></div>
      <input class="inp" id="pass" placeholder="Sua senha" type="password" autocomplete="current-password" />
      <button class="btn" id="btn" type="button">Entrar</button>
      <div class="hint" id="msg" style="margin-top:10px"></div>
    </div>

    <div class="hint" style="margin-top:14px">
      Depois de logar, abra <b>admin-p.html</b>.
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./config.js"></script>

  <script>
    (function(){
      "use strict";
      const $ = (id)=>document.getElementById(id);

      const SUPABASE_URL = window.SUPABASE_URL || window.APP_CONFIG?.SUPABASE_URL || "";
      const SUPABASE_ANON_KEY = window.SUPABASE_ANON_KEY || window.APP_CONFIG?.SUPABASE_ANON_KEY || "";

      const msg = (t, ok=false)=> { $("msg").innerHTML = ok ? "<span class='ok'>"+t+"</span>" : "<span class='bad'>"+t+"</span>"; };

      if(!SUPABASE_URL || !SUPABASE_ANON_KEY || !window.supabase?.createClient){
        msg("Faltou config.js ou supabase-js.");
        return;
      }

      const sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      $("btn").addEventListener("click", async ()=>{
        const email = ($("email").value||"").trim();
        const password = ($("pass").value||"").trim();
        if(!email || !password) return msg("Preenche email e senha.");

        msg("Entrando...", true);
        const { data, error } = await sb.auth.signInWithPassword({ email, password });

        if(error){
          msg("Erro: " + (error.message||""));
          return;
        }

        msg("Logado ✅ Agora abre o admin-p.html", true);
      });
    })();
  </script>
</body>
</html>